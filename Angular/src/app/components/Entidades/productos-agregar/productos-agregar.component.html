<app-navbar></app-navbar>
<main class="d-flex">
  <app-sidebar></app-sidebar>
  <div class="container mt-5 col-5">
    <h2 class="mb-3">
      {{ banderaNuevo ? "Agregando Producto" : "Editando Producto" }}
    </h2>

    <section id="nuevoProductoForm">
      <!-- Datos Generales -->
      <div class="form-group">
        <label for="id">Id</label>
        <input type="text" class="form-control" id="id" name="id" [(ngModel)]="nuevoProducto.id" readonly>
      </div>

      <div class="form-group">
        <label for="proveedor">Proveedor</label>
        <!-- Si está en modo de edición, muestra un input deshabilitado -->
        <ng-container *ngIf="!banderaNuevo; else selectProveedor">
          <input type="text" class="form-control" id="proveedor" name="proveedor" [(ngModel)]="nuevoProducto.proveedor" readonly>
        </ng-container>
        <!-- Si no está en modo de edición, muestra el select normal -->
        <ng-template #selectProveedor>
          <select class="form-select" id="proveedor" name="proveedor" [(ngModel)]="nuevoProducto.proveedor">
            <option value="">Selecciona un Proveedor</option>
            <option *ngFor="let p of proveedores" [value]="p.razonSocial">
              {{ p.razonSocial }}
            </option>
          </select>
        </ng-template>
      </div>

      <div class="form-group">
        <label for="categoria">Categoría</label>
        <select class="form-select" id="categoria" name="categoria" [(ngModel)]="nuevoProducto.categoria">
          <option value="">Selecciona una categoria</option>
          <option *ngFor="let c of categorias" [value]="c">
            {{ c }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label for="Nombre-Producto">Nombre Producto</label>
        <input type="text" class="form-control" id="Nombre-Producto" name="Nombre-Producto"
          [(ngModel)]="nuevoProducto.nombreProducto">
      </div>

      <div class="form-group">
        <label for="descripcion">Descripción</label>
        <!-- <input type="text" class="form-control" id="descripcion" name="descripcion" [(ngModel)]="nuevoProducto.descripcion"> -->
        <textarea class="form-control" placeholder="Descripcion del producto" id="descripcion" name="descripcion"
          [(ngModel)]="nuevoProducto.descripcion" style="height: 100px"></textarea>
      </div>

      <div class="form-group">
        <label for="precio">Precio</label>
        <div class="input-group">
          <span class="input-group-text">$</span>
          <input type="text" class="form-control" id="precio" name="precio" [(ngModel)]="nuevoProducto.precio">
        </div>
      </div>

      <div class="d-flex justify-content-end">
        <button class="btn btn-info my-4 px-5 me-4" routerLink="/productos">Volver</button>
        <button class="btn btn-success my-4 px-5" (click)="saveProduct()">{{ banderaNuevo ? "Agregar Producto" : "Editar Producto" }}</button>
      </div>


    </section>
  </div>
</main>

<app-footer></app-footer>
<router-outlet></router-outlet>